<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SWARNALAYA CALCULATOR</title>
    <style>
        /* Align all form fields and result section */
        .container form {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .row-flex {
            width: 100%;
            display: flex;
            gap: 0;
            justify-content: center;
        }
        .row-flex > div {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        .container label,
        .container input[type="number"] {
            width: 100%;
            box-sizing: border-box;
        }
        #makingInputs {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        .result {
            margin-left: auto;
            margin-right: auto;
            width: 100%;
            box-sizing: border-box;
        }
        .breakup-row {
            width: 100%;
        }
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: #181818;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            color: #f5e9c6;
        }
        .app-header {
            width: 100%;
            background: linear-gradient(90deg, #bfa14a 0%, #7c6a2c 100%);
            color: #fffbe6;
            padding: 22px 0 18px 0;
            text-align: center;
            font-size: 2.1rem;
            font-weight: 700;
            letter-spacing: 2px;
            box-shadow: 0 2px 12px #bfa14a33;
        }
        .container {
            max-width: 440px;
            margin: 48px auto 0 auto;
            background: #232323;
            padding: 38px 32px 28px 32px;
            border-radius: 18px;
            box-shadow: 0 8px 32px #bfa14a22, 0 2px 8px #000a;
            position: relative;
            border: 1.5px solid #bfa14a;
        }
        h2 {
            text-align: center;
            color: #e2c97a;
            font-size: 2.2rem;
            margin-bottom: 10px;
            letter-spacing: 1.5px;
            font-weight: 700;
        }
        form {
            margin-top: 10px;
        }
        .row-flex {
            display: flex;
            gap: 0;
        }
        .row-flex {
            display: flex;
            gap: 0;
        }
        label {
            display: block;
            margin-top: 20px;
            font-weight: 600;
            color: #e2c97a;
            font-size: 1.05rem;
        }
        input[type="number"] {
            width: 100%;
            padding: 12px;
            margin-top: 8px;
            border: 1.5px solid #bfa14a;
            border-radius: 8px;
            background: #2c2c2c;
            color: #f5e9c6;
            font-size: 1.08rem;
            transition: border-color 0.2s, box-shadow 0.2s;
            box-shadow: 0 1px 4px #bfa14a22;
        }
        .small-input {
            width: 80%;
            padding: 7px 8px;
            font-size: 0.98rem;
            background: #232323;
            color: #f5e9c6;
            border: 1.5px solid #bfa14a;
        }
        input[type="number"]:focus {
            border-color: #e2c97a;
            outline: none;
            box-shadow: 0 2px 8px #bfa14a44;
        }
        .making-options {
            display: flex;
            flex-direction: row;
            gap: 10px;
            margin-top: 7px;
            justify-content: flex-start;
            align-items: flex-start;
        }
        .making-options label {
            background: #232323;
            border-radius: 6px;
            padding: 6px 12px;
            font-weight: 500;
            color: #e2c97a;
            cursor: pointer;
            border: 1px solid #bfa14a;
            transition: background 0.2s, color 0.2s;
        }
        .making-options input[type="radio"] {
            margin-right: 6px;
        }
        .making-options label.selected {
            background: #bfa14a;
            color: #232323;
        }
        #makingInputs input {
            margin-bottom: 0;
            background: #232323;
            color: #f5e9c6;
            border: 1.5px solid #bfa14a;
    }
    .making-options input[type="radio"]:checked + span {
        background: #bfa14a;
        color: #232323;
        border-radius: 6px;
        padding: 6px 12px;
            border: 1px solid #bfa14a;
        }
        .result strong {
            color: #e2c97a;
            font-size: 1.13em;
        }
        .breakup-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 1.07em;
            color: #f5e9c6;
            word-break: break-word;
        }
        .breakup-row strong {
            font-weight: 700;
            color: #e2c97a;
        }
        @media (max-width: 500px) {
            .container {
                padding: 18px 6px 12px 6px;
            }
            h2 {
                font-size: 1.3rem;
            }
            .gold-icon {
                width: 38px;
                height: 38px;
            }
            .breakup-row {
                display: flex;
                font-size: 1em;
                align-items: center;
                justify-content: space-between;
            }
            .breakup-row span, .breakup-row strong {
                display: inline-block;
                margin-bottom: 0;
                vertical-align: middle;
            }
        }
        @media (max-width: 600px) {
            .row-flex {
                flex-direction: column;
            }
            .row-flex > div {
                margin-right: 0 !important;
            }
        }
    </style>
</head>
<body>
    <div class="app-header">SWARNALAYA CALCULATOR</div>
    <div class="container">
        <form id="goldForm">
            <div class="row-flex">
                <div style="flex:1; margin-right:10px;">
                    <label for="weight">Weight (grams):</label>
                    <input type="number" id="weight" name="weight" min="0" step="0.01" required class="small-input">
                </div>
                <div style="flex:1;">
                    <label for="rate">Rate (per gram):</label>
                    <input type="number" id="rate" name="rate" min="0" step="0.01" required class="small-input">
                </div>
            </div>
            <label>Making Charge:</label>
            <div class="making-options">
                <label style="display:flex; align-items:center;">
                    <input type="radio" name="makingType" id="makingPerGram" value="perGram" checked>
                    <span style="margin-left:6px;">PerGram</span>
                </label>
                <label style="display:flex; align-items:center;">
                    <input type="radio" name="makingType" id="makingManual" value="manual">
                    <span style="margin-left:6px;">Manual</span>
                </label>
            </div>
            <div id="makingInputs">
                <input type="number" id="making" name="making" min="0" step="0.01" placeholder="Making Charge per gram">
                <input type="number" id="makingManualValue" name="makingManualValue" min="0" step="0.01" placeholder="Manual Making Charge" style="display:none; margin-top:7px;">
            </div>
            <label for="gst">GST (%) :</label>
            <input type="number" id="gst" name="gst" min="0" step="0.01">
            <!-- Button removed for instant calculation -->
                    </form>
        <div class="result" id="result"></div>
    </div>
    <script>
        // ...existing code...
        function calculateGold() {
            var weight = parseFloat(document.getElementById('weight').value);
            var rate = parseFloat(document.getElementById('rate').value);
            var gstRaw = document.getElementById('gst').value;
            var gst = gstRaw === '' ? 0 : parseFloat(gstRaw);
            var makingType = document.querySelector('input[name="makingType"]:checked').value;

            var makingCharge = 0;
            var makingRaw = document.getElementById('making').value;
            var makingManualRaw = document.getElementById('makingManualValue').value;
            var making = makingRaw === '' ? 0 : parseFloat(makingRaw);
            var makingManualValue = makingManualRaw === '' ? 0 : parseFloat(makingManualRaw);
    
            // Treat empty or invalid fields as zero
            if (isNaN(weight) || weight < 0) weight = 0;
            if (isNaN(rate) || rate < 0) rate = 0;
            if (makingType === 'perGram' && (isNaN(making) || making < 0)) making = 0;
            if (makingType === 'manual' && (isNaN(makingManualValue) || makingManualValue < 0)) makingManualValue = 0;
            if (isNaN(gst) || gst < 0) gst = 0;

            if (makingType === 'perGram') {
                makingCharge = weight * making;
            } else if (makingType === 'manual') {
                makingCharge = makingManualValue;
            }
            var goldValue = weight * rate;
            var subtotal = goldValue + makingCharge;
            var cgst = gst && !isNaN(gst) && gst > 0 ? gst / 2 : 0;
            var sgst = gst && !isNaN(gst) && gst > 0 ? gst / 2 : 0;
            var cgstAmount = subtotal * (cgst / 100);
            var sgstAmount = subtotal * (sgst / 100);
            var gstAmount = cgstAmount + sgstAmount;
            var total = subtotal + gstAmount;
            var makingPercent = '';
            if (makingType === 'perGram' && rate > 0 && making !== undefined && making !== null && making !== '' && !isNaN(making) && making >= 0) {
                makingPercent = ' (' + ((making / rate) * 100).toFixed(2) + '%)';
            }
            document.getElementById('result').innerHTML =
                '<strong>Breakup:</strong><br>' +
                '<div class="breakup-row"><span>Gold Value:</span><span>₹' + goldValue.toFixed(2) + '</span></div>' +
                '<div class="breakup-row"><span>Making Charge' + (makingPercent ? ' <span style="color:#a89e7a;font-size:0.95em;">' + makingPercent + '</span>' : '') + ':</span><span>₹' + makingCharge.toFixed(2) + '</span></div>' +
                '<div class="breakup-row"><span>Subtotal:</span><span>₹' + subtotal.toFixed(2) + '</span></div>' +
                (cgst > 0 ? '<div class="breakup-row"><span>CGST (' + cgst.toFixed(2) + '%):</span><span>₹' + cgstAmount.toFixed(2) + '</span></div>' : '') +
                (sgst > 0 ? '<div class="breakup-row"><span>SGST (' + sgst.toFixed(2) + '%):</span><span>₹' + sgstAmount.toFixed(2) + '</span></div>' : '') +
                (gstAmount > 0 ? '<div class="breakup-row"><span>Total GST:</span><span>₹' + gstAmount.toFixed(2) + '</span></div>' : '') +
                '<div class="breakup-row"><strong>Total Value:</strong><strong>₹' + total.toFixed(2) + '</strong></div>';
        }

        function toggleMakingInput() {
            var makingType = document.querySelector('input[name="makingType"]:checked').value;
            var perGramInput = document.getElementById('making');
            var manualInput = document.getElementById('makingManualValue');
            if (makingType === 'perGram') {
                perGramInput.style.display = '';
                manualInput.style.display = 'none';
            } else {
                perGramInput.style.display = 'none';
                manualInput.style.display = '';
            }
            calculateGold();
        }

        var inputs = document.querySelectorAll('#weight, #rate, #making, #gst, #makingManualValue');
        inputs.forEach(function(input) {
            input.addEventListener('input', function(e) {
                // Allow only numbers and decimals
                var value = e.target.value;
                if (value !== '' && !/^\d*\.?\d*$/.test(value)) {
                    e.target.value = value.replace(/[^\d.]/g, '').replace(/(\..*)\./g, '$1');
                }
                calculateGold();
            });
        });
        function updateMakingLabelSelection() {
            var labels = document.querySelectorAll('.making-options label');
            labels.forEach(function(label) {
                label.classList.remove('selected');
            });
            var checked = document.querySelector('.making-options input[type="radio"]:checked');
            if (checked) {
                checked.parentElement.classList.add('selected');
            }
        }
        document.getElementById('makingPerGram').addEventListener('change', function() {
            toggleMakingInput();
            updateMakingLabelSelection();
        });
        document.getElementById('makingManual').addEventListener('change', function() {
            toggleMakingInput();
            updateMakingLabelSelection();
        });
        // Initial state
        toggleMakingInput();
        updateMakingLabelSelection();
    </script>
</body>
</html>
